/**
 * Grid Definition Area
 */

.grid {
  display: grid;
  /*grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));*/
  grid-template-columns: repeat(var(--grid-cols), 1fr);
  width: max-content;
  height: max-content;
  grid-gap: 8px;

  --activeRow: 0;
  --activeColumn: 0;
  --activeCube: 0;
  --activeIndex: 0;
}

.tile {
  /* Active Row */
  --isNotRowHighlight: min(
    calc((var(--activeRow) - var(--row)) * (var(--activeRow) - var(--row))),
    1
  );
  --isRowHighlight: calc(1 - var(--isNotRowHighlight));

  /* Active Column */
  --isNotColHighlight: min(
    calc(
      (var(--activeColumn) - var(--column)) *
        (var(--activeColumn) - var(--column))
    ),
    1
  );
  --isColHighlight: calc(1 - var(--isNotColHighlight));

  /* Active Cube */
  --isNotCubeHighlight: min(
    calc((var(--activeCube) - var(--cube)) * (var(--activeCube) - var(--cube))),
    1
  );
  --isCubeHighlight: calc(1 - var(--isNotCubeHighlight));

  /* Active Index */
  --isNotActiveIndex: min(
    calc(
      (var(--activeIndex) - var(--index)) * (var(--activeIndex) - var(--index))
    ),
    1
  );
  --isActiveIndex: calc(1 - var(--isNotActiveIndex));

  /* Is Active */
  /* --isActive: min(
    calc(var(--isRowHighlight) + var(--isColHighlight)+ var(--isCubeHighlight)),
    1
  );*/

  /* prettier-ignore */
  --isActive: calc(
    (1 -
      (
        (1 - var(--isRowHighlight)) * 
        (1 - var(--isColHighlight)) *
        (1 - var(--isCubeHighlight))
      )
    ) * var(--isNotActiveIndex)
  );
  --isNotActive: calc(1 - var(--isActive));

  /* Hack from: https://dev.to/siddharthshyniben/conditional-logic-with-css-the-css-custom-property-trick-44hb
  and: https://lea.verou.me/2020/10/the-var-space-hack-to-toggle-multiple-values-with-one-custom-property/?
  --isActive: ;
  --highlight-Color: var(--isActive) rgba(0, 0, 255, 1);
  background-color: var(--highlight-Color, var(--defaultColor));
  */

  /* activeRow - row = 0, wenn active row*/
  --defaultColor: rgba(180, 180, 180, 1);

  /* prettier-ignore */
  --r: calc(180 * var(--isNotActive) + calc(60 * var(--isActive)) + calc(255 * var(--isActiveIndex)) );

  /* prettier-ignore */
  --g: calc(180 * var(--isNotActive) + calc(100 * var(--isActive)) + calc(255 * var(--isActiveIndex)) );

  /* prettier-ignore */
  --b: calc(180 * var(--isNotActive) + calc(255 * var(--isActive)) + calc(0 * var(--isActiveIndex)) );

  /* prettier-ignore */
  --a: 1;
  background-color: rgba(var(--r), var(--g), var(--b), var(--a));

  text-align: center;
  width: 5vh;
  height: 5vh;
}

.tile::after {
  content: 'IsActive: ' var(--isActive);
}

/**
 * Body Definitions
 */

body {
  position: relative;
}

h1,
h2 {
  font-family: Lato;
}

.toolbar {
  margin-bottom: 10px;
}

/**
 * CSS Custom Property Typings
 */
@property --index {
  syntax: '<number>';
  inherits: false;
  initial-value: 0;
}

/* --delay MUST be a number, bc. it's used with calc()*/
@property --delay {
  syntax: '<number>';
  inherits: true;
  initial-value: 0;
}

/* --duration MUST be a <time>, bc. it's used directly in animation timing function*/
@property --duration {
  syntax: '<time>';
  inherits: true;
  initial-value: 1s;
}

@property --element-count {
  syntax: '<number>';
  inherits: false;
  initial-value: 0;
}

@property --grid-cols {
  syntax: '<number>';
  inherits: false;
  initial-value: 0;
}

@property --grid-rows {
  syntax: '<number>';
  inherits: false;
  initial-value: 0;
}

/**
 * Used for setting the correct animation delay for all diagonal cells
 * see calculation in index.ts
 */
@property --diagonal-animation-group {
  syntax: '<number>';
  inherits: false;
  initial-value: 0;
}
